var kue = require('kue');
var queue = kue.createQueue();

var numRuns = 10000;
var finished = 0;
var finishTime, startTime;

var total = 0;
var reportResult = function (result) {
  total += result;
  finished += 1;
  if (finished == numRuns) {
    finishTime = (new Date()).getTime();
    console.log('finished, ' + (finishTime - startTime) + ' sum: ' + total);
  }
};

startTime = (new Date()).getTime();

for (var i = 0; i < numRuns; i++) {
  queue.create('test', {i: i}).save().on('complete', reportResult);
}
